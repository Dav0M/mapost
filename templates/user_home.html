{% extends "header_template.html" %}
{% block head %}
  {{ super() }}
  <title> {{ user.name }}'s Profile </title>
  <link rel="stylesheet" href="/static/css/user_home.css">
  <script src="/static/js/delete.js"></script>
{% endblock %}
{% block content %}

  <div class="pure-g">
    <div class="pure-u-1 user-container">
      <div class="pure-g user-details">
        <div class="pure-u">
          <img width="64" height="64" class="user-img" src="{{ user.img }}">
        </div>
        <div class="pure-u user-details">
          <h1 class="user-name">{{ user.name }}</h1>
        </div>
      </div>
    </div>
    <div class="post-list pure-u-3-5">
      <div class="pure-g">
        {% if posts|length == 0 %}
          <h1>{{ user.name }} has no posts :</h1>
        {% else %}
          {% for post in posts %}
            <div class="post-row pure-u-1" id="{{ post['id'] }}">
              <div class="pure-g">
                <div class="post pure-u-3-5">
                  <div class="post-author-img"><img class="author-img" src="{{ post['user_img'] }}"></div>
                  <div class="post-author"><a href="/user/{{ post['user_id'] }}">{{ post['name'] }}</a></div>
                  {% if session.get('user_id') and session['user_id']['id'] == user.id %}
                    <ul class="pure-menu-list">
                      <div class="pure-menu pure-menu-horizontal pure-menu-has-children pure-menu-allow-hover">
                        <button type="button" class="pure-button more-button">...</button>
                        <ul class="pure-menu-children">
                          <li class="pure-menu-item">
                            <a class="pure-button edit-button" href="/edit/{{ user.id }}?post={{ post['id'] }}">Edit</a>
                          </li>
                          <li class="pure-menu-item">
                            <button type="button" class="pure-button delete-button">Delete</button>
                          </li>
                        </ul>
                    </ul>
                  {% endif %}
                  <div class="post-date">{{ post['time'] }}</div>
                  <div class="post-content">{{ post['content'] }}</div>
                  {% if post.get('img') != '' %}
                    <div class="post-image"><img class="images" src="data:image;base64,{{ post['img'] }}"></div>
                  {% endif %}
                  <div class="post-location">{{ post['geog'] }}</div>
                </div>
              </div>
            </div>
          {% endfor %}
          <div class="pure-menu pure-menu-horizontal pages">
            <ul class="pure-menu-list">
              {% if page > 1%}
                <li class="pure-menu-item page-back">
                  <a href="/user/{{ user['id'] }}?page={{ page-1 }}" class="pure-menu-link">Back</a>
                </li>
              {% endif %}
                <li class="pure-menu-item page-curr">
                  <a href="" class="pure-menu-heading">{{ page }}</a>
                </li>
              {% if page < total %}
                <li class="pure-menu-item page-next">
                  <a href="/user/{{ user['id'] }}?page={{ page+1 }}" class="pure-menu-link">Next</a>
                </li>
              {% endif %}
            </ul>
          </div>
        {% endif %}
      </div>
    </div>
  </div>

{% endblock %}