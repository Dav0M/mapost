{% extends "header_template.html" %}
{% block head %}
  {{ super() }}
  <title> {{ user.name }}'s Profile </title>
  <link rel="stylesheet" href="/static/css/user_home.css">
  <script src="/static/js/delete.js"></script>
{% endblock %}
{% block content %}

  <div class="pure-g">
    <div class="pure-u-1 user-container">
      <div class="pure-g user-details">
        <div class="pure-u">
          <img width="64" height="64" class="user-img" src="{{ user.img }}">
        </div>
        <div class="pure-u user-name">
          <h1 class="user-name">{{ user.name }}</h1>
        </div>
      </div>
    </div>
    <div class="pure-u-3-5 post-container">
        {% if posts|length == 0 %}
          <h1>{{ user.name }} has no posts :</h1>
        {% else %}
        <div class="post-col-right">
          {% for i in range(posts| length) %}
            {% if i%2 != 0 %}
            <div class="pure-u-3-5" id="{{ posts[i]['id'] }}">
                <div class="post">
                  <div class="post-author-img"><img class="author-img" src="{{ posts[i]['user_img'] }}"></div>
                  <div class="post-author"><a>{{ posts[i]['name'] }}</a></div>
                {% if session.get('user_id') and session['user_id']['id'] == user.id %}
                  <ul class="pure-menu-list">
                    <div class="pure-menu pure-menu-horizontal pure-menu-has-children pure-menu-allow-hover">
                      <button type="button" class="pure-button more-button">...</button>
                      <ul class="pure-menu-children">
                        <li class="pure-menu-item">
                          <a class="pure-menu-link edit-button" href="/edit/{{ user.id }}?post={{ posts[i]['id'] }}">Edit</a>
                        </li>
                        <li class="pure-menu-item">
                          <a class="pure-menu-link delete-button" data-post-id="{{ posts[i]['id'] }}">Delete</a>
                        </li>
                      </ul>
                  </ul>
                {% endif %}
                <div class="post-date">{{ posts[i]['time'] }}</div>
                <div class="post-content">{{ posts[i]['content'] }}</div>
                {% if posts[i].get('img') != '' %}
                  <div class="post-image"><img class="images" src="data:image;base64,{{ posts[i]['img'] }}"></div>
                {% endif %}
                <div class="post-location">{{ posts[i]['geog'] }}</div>
              </div>

            </div>
            {% endif %}
          {% endfor %}
        </div>
        <div class="post-col-left">
          {% for i in range(posts| length) %}
            {% if i%2 == 0 %}
            <div class="pure-u-3-5" id="{{ posts[i]['id'] }}">
                <div class="post">
                  <div class="post-author-img"><img class="author-img" src="{{ posts[i]['user_img'] }}"></div>
                  <div class="post-author"><a>{{ posts[i]['name'] }}</a></div>
                  {% if session.get('user_id') and session['user_id']['id'] == user.id %}
                    <ul class="pure-menu-list">
                      <div class="pure-menu pure-menu-horizontal pure-menu-has-children pure-menu-allow-hover">
                        <button type="button" class="pure-button more-button">...</button>
                        <ul class="pure-menu-children">
                          <li class="pure-menu-item">
                            <a class="pure-menu-link edit-button" href="/edit/{{ user.id }}?post={{ posts[i]['id'] }}">Edit</a>
                          </li>
                          <li class="pure-menu-item">
                            <a class="pure-menu-link delete-button" data-post-id="{{ posts[i]['id'] }}">Delete</a>
                          </li>
                        </ul>
                    </ul>
                  {% endif %}
                  <div class="post-date">{{ posts[i]['time'] }}</div>
                  <div class="post-content">{{ posts[i]['content'] }}</div>
                  {% if posts[i].get('img') != '' %}
                    <div class="post-image"><img class="images" src="data:image;base64,{{ posts[i]['img'] }}"></div>
                  {% endif %}
                  <div class="post-location">{{ posts[i]['geog'] }}</div>
                </div>
            </div>
            {% endif %}
          {% endfor %}
        </div>
        <div class="pure-menu pure-menu-horizontal pages">
          <ul class="pure-menu-list">
            {% if page > 1%}
              <li class="pure-menu-item page-back">
                <a href="/user/{{ user['id'] }}?page={{ page-1 }}" class="pure-menu-link button-color">Back</a>
              </li>
            {% endif %}
              <li class="pure-menu-item page-curr">
                <a href="" class="pure-menu-heading">{{ page }}</a>
              </li>
            {% if page < total %}
              <li class="pure-menu-item page-next">
                <a href="/user/{{ user['id'] }}?page={{ page+1 }}" class="pure-menu-link button-color">Next</a>
              </li>
            {% endif %}
          </ul>
        </div>
      {% endif %}

    </div>
  </div>

{% endblock %}